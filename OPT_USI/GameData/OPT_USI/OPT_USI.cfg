// USI LS for OPT Spaceplane
// Author: JadeOfMaar
// Version 1.3.1; Oct 12 2017
// Affects all cockpits except Mk2 cockpits and OPT I-LS AA Cockpit Mk1
// Affects all other crewed parts except J boarding ramps
// Affects all cargo and hollow parts except J Deployment, Stail, and Stail Freight
// Affects H fuel tanks because there's no H class bay or hollow fuselage, and H cabins have no spare volume

// Cockpits
// @PART[mk2_cockpit,mk2_cockpitv2]:AFTER[USILifeSupport] {}

// Mk3 cockpit
@PART[mk3Cockpit_Airliner]:AFTER[USILifeSupport]
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	RESOURCE
	{
		name = Supplies
		amount = 400
		maxAmount = 400
	}
	
	RESOURCE
	{
		name = ElectricCharge
		amount = 500
		maxAmount = 500
	}
	
	RESOURCE
	{
		name = MonoPropellant
		amount = 50
		maxAmount = 100
	}
}

// Avatar cockpit
@PART[a_cockpit]:AFTER[USILifeSupport]
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	RESOURCE
	{
		name = Supplies
		amount = 800
		maxAmount = 800
	}
	
	RESOURCE
	{
		name = ElectricCharge
		amount = 2500
		maxAmount = 2500
	}
	
	RESOURCE
	{
		name = MonoPropellant
		amount = 50
		maxAmount = 450
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// Stail cockpit, no intake
@PART[b_cockpit]:AFTER[USILifeSupport]
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge;LiquidFuel,ElectricCharge;LiquidFuel,Oxidizer,ElectricCharge
		resourceAmounts = 1600,400,1500;1120,1500;504,616,1500
		initialResourceAmounts = 1600,0,1500;1120,1500;504,616,1500
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// Stail cockpit with intake
@PART[b_cockpit_qs]:AFTER[USILifeSupport]
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	+MODULE[ModuleResourceIntake]
	{
		@resourceName = IntakeAtm
		!checkForOxygen = true
	}
	
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,IntakeAir,IntakeAtm;LiquidFuel,ElectricCharge,IntakeAir,IntakeAtm;LiquidFuel,Oxidizer,ElectricCharge,IntakeAir,IntakeAtm
		resourceAmounts = 1600,400,1500,5,5;1120,1500,5,5;504,616,1500,5,5
		initialResourceAmounts = 1600,0,1500,2,2;1120,1500,2,2;504,616,1500,2,2
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// 2.5m cockpits
@PART[i_4m_cockpit_isp,phoenix_cockpit,ils_cockpitv2]:AFTER[USILifeSupport]
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge;LiquidFuel,ElectricCharge;LiquidFuel,Oxidizer,ElectricCharge
		resourceAmounts = 800,200,1500;420,1500;189,231,1500
		initialResourceAmounts = 800,000,1500;420,1500;189,231,1500
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
}

// J cockpits, no intake
@PART[j_cockpit,j_cockpitv2,j_cockpit_qs_no_intake]:AFTER[USILifeSupport] 
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge;LiquidFuel,ElectricCharge;LiquidFuel,Oxidizer,ElectricCharge
		resourceAmounts = 1600,400,1500;1120,1500;504,616,1500
		initialResourceAmounts = 1600,0,1500;1120,1500;504,616,1500
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// J cockpits with intake
@PART[j_cockpit_qs,j_6m_cockpit]:AFTER[USILifeSupport] 
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
	
	+MODULE[ModuleResourceIntake]
	{
		@resourceName = IntakeAtm
		!checkForOxygen = true
	}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,IntakeAir,IntakeAtm;LiquidFuel,ElectricCharge,IntakeAir,IntakeAtm;LiquidFuel,Oxidizer,ElectricCharge,IntakeAir,IntakeAtm
		resourceAmounts = 1600,400,1500,5,5;1120,1500,5,5;504,616,1500,5,5
		initialResourceAmounts = 1600,0,1500,2,2;1120,1500,2,2;504,616,1500,2,2
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// K cockpits
@PART[k_10m_cockpit,k_10m_cockpit_legacy,k_10m_cockpit_custom]:AFTER[USILifeSupport] 
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	+MODULE[ModuleResourceIntake]
	{
		@resourceName = IntakeAtm
		!checkForOxygen = true
	}
	
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,IntakeAir,IntakeAtm;LiquidFuel,ElectricCharge,IntakeAir,IntakeAtm;LiquidFuel,Oxidizer,ElectricCharge,IntakeAir,IntakeAtm
		resourceAmounts = 3200,800,1500,6,6;1120,1500,6,6;504,616,1500,6,6
		initialResourceAmounts = 3200,0,1500,2,2;1120,1500,2,2;504,616,1500,2,2
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 8
		RecyclePercent = .65
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 16.4
		}
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// Humpback cockpit
@PART[l_8m_cockpit]:AFTER[USILifeSupport] 
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
	
	+MODULE[ModuleResourceIntake]
	{
		@resourceName = IntakeAtm
		!checkForOxygen = true
	}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,IntakeAir,IntakeAtm;LiquidFuel,ElectricCharge,IntakeAir,IntakeAtm;LiquidFuel,Oxidizer,ElectricCharge,IntakeAir,IntakeAtm
		resourceAmounts = 3200,800,2500,7,7;1120,2500,7,7;504,616,2500,7,7
		initialResourceAmounts = 3200,0,2500,2,2;1120,2500,2,2;504,616,2500,2,2
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 36
		CrewCapacity = 10
		BaseHabMultiplier = 0.5
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.125
		}
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 10
		RecyclePercent = .65
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 20.5
		}
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// H cabins
@PART[h_3m_crew_mm,h_3m_crew_fm]:AFTER[USILifeSupport] 
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 0
		CrewCapacity = 4
		BaseHabMultiplier = 0.7
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.07
		}
	}
}

// J cabin
@PART[j_4m_crew]:AFTER[USILifeSupport] 
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies,Mulch,ElectricCharge;LiquidFuel,ElectricCharge;LiquidFuel,Oxidizer,ElectricCharge
		resourceAmounts = 0;3200,800,1000;1680,1000;756,924,1000
		initialResourceAmounts = 0;3200,0,1000;1680,1000;756,924,1000
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 72
		CrewCapacity = 8
		BaseHabMultiplier = 0.7
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.14
		}
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 12
		RecyclePercent = .7
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 37.2
		}
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// Humpback cabin
@PART[l_6m_crew]:AFTER[USILifeSupport] 
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies,Mulch,ElectricCharge;LiquidFuel,ElectricCharge;LiquidFuel,Oxidizer,ElectricCharge
		resourceAmounts = 0;3200,800,2500;3920,2500;1764,2156,2500
		initialResourceAmounts = 0;3200,0,2500;3920,2500;1764,2156,2500
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 140
		CrewCapacity = 8
		BaseHabMultiplier = 0.7
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.14
		}
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 12
		RecyclePercent = .8
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 12
		}
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

//@PART[j_2m_inlineBoardingRamp,j_3m_rearHatch]:AFTER[USILifeSupport] {}

// Labs
@PART[j_4m_lab,b_4m_lab]:AFTER[USILifeSupport]
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 4
		RecyclePercent = .5
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1
		}
	}
}

// J bays
@PART[j_4m_cargo,j_4m_service]:AFTER[USILifeSupport]
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies;Fertilizer;Gypsum;Minerals;Ore;LiquidFuel;LiquidFuel,Oxidizer
		resourceAmounts = 0;4000;4000;4000;4000;480;1080;540,660
		initialResourceAmounts = 0;4000;4000;4000;4000;0;1080;540,660
		basePartMass = 0.29
		tankMass = 0;0;0;0;0;0;0;0
		tankCost = 0;0;0;0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// K, KH and Humpback cargo and hollows (6m only, no 3m)
@PART[k_6m_cargo,k_6m_fuselage,kh_6m_cargo,kh_6m_fuselage,l_6m_cargo,l_6m_fuselage]:AFTER[USILifeSupport]
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies;Fertilizer;Gypsum;Minerals;Ore;LiquidFuel;LiquidFuel,Oxidizer
		resourceAmounts = 0;43200;43200;43200;43200;8640;2520;1260,1540
		initialResourceAmounts = 0;43200;43200;43200;43200;0;2520;1260,1540
		basePartMass = 0.29
		tankMass = 0;0;0;0;0;0;0;0
		tankCost = 0;0;0;0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// Avatar cargo and hollow
@PART[c_6m_cargo,c_6m_tanks]:AFTER[USILifeSupport]
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies;Fertilizer;Gypsum;Minerals;Ore;LiquidFuel;LiquidFuel,Oxidizer
		resourceAmounts = 0;45000;45000;45000;45000;9000;3200;1440,1760
		initialResourceAmounts = 0;45000;45000;45000;45000;0;3200;1440,1760
		basePartMass = 0.29
		tankMass = 0;0;0;0;0;0;0;0
		tankCost = 0;0;0;0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

// H tanks because there's no H size bay
@PART[h_3m_fuel_mm,h_3m_fuel_fm]:AFTER[USILifeSupport] 
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies,Mulch,ElectricCharge;LiquidFuel,ElectricCharge;LiquidFuel,Oxidizer,ElectricCharge;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 0;1280,320,400;1120,400;504,616,400;800,400,120;360,540,400,120
		initialResourceAmounts = 0;1280,0,400;1120,400;504,616,400;800,400,120;360,540,400,120
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
}

// H long noses
@PART[h_4m_nose_mm,h_4m_nose_fm]:AFTER[USILifeSupport] 
{
	!RESOURCE,* {}
	!MODULE[FSfuelSwitch],* {}
	!MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies,Mulch,ElectricCharge;LiquidFuel,ElectricCharge;LiquidFuel,Oxidizer,ElectricCharge;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 0;1280,320,400;1120,400;504,616,400;800,400,120;360,540,400,120
		initialResourceAmounts = 0;1280,0,400;1120,400;504,616,400;800,400,120;360,540,400,120
		basePartMass = 0.29
		tankMass = 0;0;0;0;0
		tankCost = 0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 4
		RecyclePercent = .6
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 2
		}
	}
}