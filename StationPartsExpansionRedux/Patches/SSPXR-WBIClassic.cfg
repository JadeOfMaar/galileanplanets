// Greenhouse = = = = = = = = = = = = = = = = = = = = = = = = = = =

@PART[sspx-greenhouse-25-1]:NEEDS[StationPartsExpansionRedux]
{
	MODULE
	{
		name = WBIMultipurposeStorage
		enableLogging = True
		fieldReconfigurable = True
		confirmResourceSwitch = True
		showGUI = True
		templateNodes = GREENHOUSE
		capacityFactor = 1
		baseStorage = 0
		maxStorage = 0
	}
}
@PART[sspx-greenhouse-375-1|sspx-aquaculture-375-1]:NEEDS[StationPartsExpansionRedux]
{
	MODULE
	{
		name = WBIMultipurposeStorage
		enableLogging = True
		fieldReconfigurable = True
		confirmResourceSwitch = True
		showGUI = True
		templateNodes = GREENHOUSE
		capacityFactor = 1.5
		baseStorage = 0
		maxStorage = 0
	}
}
@PART[sspx-greenhouse-375-2]:NEEDS[StationPartsExpansionRedux]
{
	MODULE
	{
		name = WBIMultipurposeStorage
		enableLogging = True
		fieldReconfigurable = True
		confirmResourceSwitch = True
		showGUI = True
		templateNodes = SSPXUTIL1
		capacityFactor = 1
		baseStorage = 0
		maxStorage = 0
	}
}


// Omni Slots = = = = = = = = = = = = = = = = = = = = = = = = = = =

SSPXUTIL1
{
	author = JadeOfMaar
	name = Mariner
	title = SSPX 1 slot fittings
	shortName = SSPX 1 slot fittings
	description = TBD.
	mass = 0.1
	// requiredResource = Equipment
	// requiredAmount = 600
	// reconfigureSkill = ConverterSkill
	logoPanel = WildBlueIndustries/Pathfinder/Decals/Omni
	glowPanel = WildBlueIndustries/Pathfinder/Decals/Omni
	// toolTip = 
	// toolTipTitle = Your First Ponderosa Habitat!
	templateTags = 
	MODULE
	{
		name = WBIOmniConverter
		managedName = OmniConverter 1
		templateNodes = OMNICONVERTER
		templateTags = hab
		BaseEfficiency = 1
		reconfigureSkill = ConverterSkill
		requiredResource = Equipment
		requiredAmount = 300
		ConverterName = OmniConverter 1
		StartActionName = Start Converter
		StopActionName = Stop Converter
		AutoShutdown = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		ExperienceEffect = ConverterSkill
		EfficiencyBonus = 1
	}
}


// Cargo = = = = = = = = = = = = = = = = = = = = = = = = = = =

@PART[sspx-cargo-container*]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[ModuleB9DisableTransform]
	{
		!transform,* = any
		transform = OreDecal
		// All other decals here
		transform = MetallicOreDecal
		transform = UraniniteDecal
		transform = SubstrateDecal
		transform = MineralsDecal
		transform = CommoditiesDecal
		transform = ExoticMineralsDecal
		transform = RareMetalsDecal
		transform = MaterialKitsDecal
		transform = MetalsDecal
		transform = PolymersDecal
		transform = SuppliesDecal
		transform = MachineryDecal
		transform = RecyclablesDecal
		transform = SpecializedPartsDecal
		transform = FertilizerDecal
		transform = HydratesDecal
		transform = GypsumDecal
		transform = DirtDecal
		transform = SilicatesDecal
		transform = SiliconDecal
		transform = RefinedExoticsDecal
		transform = ColonySuppliesDecal
		transform = OrganicsDecal
		transform = RockDecal
		transform = WaterDecal
		transform = LeadDecal
		transform = SnacksDecal
		transform = SoilDecal
		transform = RocketPartsDecal
		transform = LifeSupportDecal
	}
	MODULE
	{
		name = WBIOmniStorage
		storageVolume = #$../MODULE[ModuleB9PartSwitch]/baseVolume$
		reconfigureSkill = ConverterSkill

		//Minimum rank to reconfigure the container.
		reconfigureRank = 1
		requiredResource = Equipment
		requiredAmount = 0
		
		resourceBlacklist = GeoEnergy;ElectroPlasma;CoreHeat;Atmosphere;CompressedAtmosphere;LabTime;ExposureTime;ScopeTime;SolarReports;SimulatorTime;GravityWaves;IntakeAir;StaticCharge;EVA Propellant;Lead;Plants
	}
	MODULE:NEEDS[KIS]
	{
		name = ModuleKISInventory
		maxVolume = #$../MODULE[ModuleB9PartSwitch]/baseVolume$
		externalAccess = true
		internalAccess = true
		slotsX = 8
		slotsY = 5
		slotSize = 50
		itemIconResolution = 128
		selfIconResolution = 128
		openSndPath = KIS/Sounds/containerOpen
		closeSndPath = KIS/Sounds/containerClose
		defaultMoveSndPath = KIS/Sounds/itemMove
	}
	
	MODULE:NEEDS[BARIS]
	{
		name = ModuleBreakableFuelTank
	}
	MODULE:NEEDS[BARIS]
	{
		name = ModuleQualityControl
		mtbf = 2500
	}
}

@PART[sspx-cargo-container*]:AFTER[StationPartsExpansionRedux]
{
	!MODULE[ModuleB9PartSwitch] {}
}


// Command = = = = = = = = = = = = = = = = = = = = = = = = = = =

@PART[sspx-core-25-1|sspx-core-375-1|sspx-cupola-375-1]:NEEDS[StationPartsExpansionRedux]
{
	MODULE
	{
		name = WBIMultipurposeHab
		enableLogging = True
		showGUI = True
		isInflatable = False

		//Some containers don't hold as much resources as the template specifies, while others hold more.
		//Since the resource templates specify base amounts, the capacity factor specifies a multiplier to
		//factor into the resource amounts.
		capacityFactor = 0.057
		fieldReconfigurable = true

		//name of the template nodes to use
		templateNodes = PATH_HABITATION

		//Short name of the default module template.
		//This is used when selecting the part in the editor.
		//User will then right-click on the module to change its type.
		defaultTemplate = Pigpen // GeoLab

		//If the part has a KIS container, this is the base and max amount
		baseStorage = 0.001
		maxStorage = 2000

		partToolTipTitle = Your First Habitat
		partToolTip = Want to use the Ponderosa for more than one purpose? With a feat of engineering, you can change it in the field. For a price... The cornerstone of your habitation needs, resources created in one of the module's many configurations will benefit from soil analysis.
		opsViewTitle = Ponderosa Operations
		
		resourcesToKeep = ElectricCharge
		%resourcesToKeep:NEEDS[SnacksUtils] = ElectricCharge;Snacks
		%resourcesToKeep:NEEDS[Kerbalism] = ElectricCharge;Shielding;Food;Oxygen
		%resourcesToKeep:NEEDS[TacLifeSupport] = ElectricCharge;Food;Oxygen;Water;CarbonDioxide;Waste;WasteWater
		%resourcesToKeep:NEEDS[USILifeSupport] = ElectricCharge;Supplies;Mulch;ReplacementParts
	}
	
	MODULE:NEEDS[BARIS]
	{
		name = ModuleQualityControl
		quality = 20
		mtbf = 720
		guiVisible = false

		showUpgradesInModuleInfo = true
		UPGRADES
		{
			UPGRADE
			{
				name__ = PathfinderQuality1
				description__ = Quality: 75; MTBF: 800hrs
				techRequired__ = advMetalWorks
				mtbf = 800
				quality = 25
			}
			UPGRADE
			{
				name__ = PathfinderQuality2
				description__ = Quality: 100; MTBF: 900hrs
				techRequired__ = metaMaterials
				mtbf = 900
				quality = 30
			}
		}
	}

	MODULE
	{
		name = WBIResourceDistributor
		resourceBlacklist = ReplacementParts
	}

	MODULE
	{
		name = WBIEfficiencyMonitor
		efficiencyType = habitation
		harvestType = 0
	}
}

@PART[sspx-core-25-1]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 0.75
		@maxStorage *= 0.75
	}
}


// Cabins Rigid = = = = = = = = = = = = = = = = = = = = = = = = = = =

@PART[sspx-observation-25-1|sspx-habitation-25-1|sspx-habitation-375-?|sspx-habitation-125-1|sspx-utility-125-1]:NEEDS[StationPartsExpansionRedux]
{
	MODULE
	{
		name = WBIMultipurposeHab
		enableLogging = True
		showGUI = True
		isInflatable = False

		//Some containers don't hold as much resources as the template specifies, while others hold more.
		//Since the resource templates specify base amounts, the capacity factor specifies a multiplier to
		//factor into the resource amounts.
		capacityFactor = 1.0
		fieldReconfigurable = true

		//name of the template nodes to use
		templateNodes = PATH_HABITATION

		//Short name of the default module template.
		//This is used when selecting the part in the editor.
		//User will then right-click on the module to change its type.
		defaultTemplate = Pigpen // GeoLab

		//If the part has a KIS container, this is the base and max amount
		baseStorage = 0.001
		maxStorage = 1000

		partToolTipTitle = Your First Habitat
		partToolTip = Want to use the Ponderosa for more than one purpose? With a feat of engineering, you can change it in the field. For a price... The cornerstone of your habitation needs, resources created in one of the module's many configurations will benefit from soil analysis.
		opsViewTitle = Ponderosa Operations
		
		resourcesToKeep:NEEDS[SnacksUtils] = ElectricCharge;Snacks
		resourcesToKeep:NEEDS[Kerbalism] = ElectricCharge;Shielding;Food;Oxygen
		resourcesToKeep:NEEDS[TacLifeSupport] = ElectricCharge;Food;Oxygen;Water;CarbonDioxide;Waste;WasteWater
		resourcesToKeep:NEEDS[USILifeSupport] = ElectricCharge;Supplies;Mulch;ReplacementParts
	}
}

@PART[sspx-habitation-25-1]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 2
		@maxStorage *= 2
	}
}
@PART[sspx-habitation-375-1]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 3
		@maxStorage *= 3
	}
}
@PART[sspx-habitation-375-2|sspx-habitation-375-3]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 1.5
		@maxStorage *= 1.5
	}
}
@PART[sspx-habitation-125-1]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 0.5
		@maxStorage *= 0.5
	}
}
@PART[sspx-sspx-utility-125-1-125-1]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		templateNodes = SSPXUTIL1
	}
}


// Cabins Inflatable = = = = = = = = = = = = = = = = = = = = = = = = = = =

@PART[sspx-inflatable-hab-25-?|sspx-inflatable-hab-125-?]:NEEDS[StationPartsExpansionRedux]
{
	%DeployedMass = #$mass$
	@mass *= 0.4
	
	@MODULE[ModuleDeployableHabitat]
	{
		DeployResource = Equipment
		DeployResourceAmount = #$../DeployedMass$
		@DeployResourceAmount *= 120 // 600
		%DeployedMassModifier = #$../DeployedMass$
		@DeployedMassModifier *= 0.6
	}
	
	MODULE
	{
		name = WBIMultipurposeHab
		enableLogging = True
		showGUI = True
		// isInflatable = True
		// inflatedCrewCapacity = #$../MODULE[ModuleDeployableHabitat]/DeployedCrewCapacity$
		// animationName = #$../MODULE[ModuleDeployableHabitat]/DeployAnimationName$
		startEventGUIName = Assemble
		endEventGUIName = Disassemble

		//Some containers don't hold as much resources as the template specifies, while others hold more.
		//Since the resource templates specify base amounts, the capacity factor specifies a multiplier to
		//factor into the resource amounts.
		capacityFactor = 1.0
		fieldReconfigurable = true

		//name of the template nodes to use
		templateNodes = PATH_HABITATION

		//Short name of the default module template.
		//This is used when selecting the part in the editor.
		//User will then right-click on the module to change its type.
		defaultTemplate = Pigpen // GeoLab

		//If the part has a KIS container, this is the base and max amount
		baseStorage = 0.001
		maxStorage = 2000

		partToolTipTitle = Your First Habitat
		partToolTip = Want to use the Ponderosa for more than one purpose? With a feat of engineering, you can change it in the field. For a price... The cornerstone of your habitation needs, resources created in one of the module's many configurations will benefit from soil analysis.
		opsViewTitle = Ponderosa Operations
		
		resourcesToKeep:NEEDS[SnacksUtils] = ElectricCharge;Snacks
		resourcesToKeep:NEEDS[Kerbalism] = ElectricCharge;Shielding;Food;Oxygen
		resourcesToKeep:NEEDS[TacLifeSupport] = ElectricCharge;Food;Oxygen;Water;CarbonDioxide;Waste;WasteWater
		resourcesToKeep:NEEDS[USILifeSupport] = ElectricCharge;Supplies;Mulch;ReplacementParts
	}
}

@PART[sspx-inflatable-hab-25-1]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 4.5
		@maxStorage *= 4.5
	}
}
@PART[sspx-inflatable-hab-25-2]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 1.5
		@maxStorage *= 1.5
	}
}
@PART[sspx-inflatable-hab-125-?]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 0.5
		@maxStorage *= 0.5
	}
}

// Centrifuges = = = = = = = = = = = = = = = = = = = = = = = = = = =

@PART[sspx-inflatable-centrifuge-25-?|sspx-expandable-centrifuge-375-?]:NEEDS[StationPartsExpansionRedux]
{
	%DeployedMass = #$mass$
	@mass *= 0.4
	
	@MODULE[ModuleDeployableCentrifuge]
	{
		DeployResource = Equipment
		DeployResourceAmount = #$../DeployedMass$
		@DeployResourceAmount *= 120 // 600
		%DeployedMassModifier = #$../DeployedMass$
		@DeployedMassModifier *= 0.6
	}
	
	MODULE
	{
		name = WBIMultipurposeHab
		enableLogging = True
		showGUI = True
		// isInflatable = True
		// inflatedCrewCapacity = #$../MODULE[ModuleDeployableCentrifuge]/DeployedCrewCapacity$
		// animationName = #$../MODULE[ModuleDeployableCentrifuge]/DeployAnimationName$
		startEventGUIName = Assemble
		endEventGUIName = Disassemble

		//Some containers don't hold as much resources as the template specifies, while others hold more.
		//Since the resource templates specify base amounts, the capacity factor specifies a multiplier to
		//factor into the resource amounts.
		capacityFactor = 1.0
		fieldReconfigurable = true

		//name of the template nodes to use
		templateNodes = PATH_HABITATION

		//Short name of the default module template.
		//This is used when selecting the part in the editor.
		//User will then right-click on the module to change its type.
		defaultTemplate = Pigpen // GeoLab

		//If the part has a KIS container, this is the base and max amount
		baseStorage = 0.001
		maxStorage = 2000

		partToolTipTitle = Your First Habitat
		partToolTip = Want to use the Ponderosa for more than one purpose? With a feat of engineering, you can change it in the field. For a price... The cornerstone of your habitation needs, resources created in one of the module's many configurations will benefit from soil analysis.
		opsViewTitle = Ponderosa Operations
		
		resourcesToKeep:NEEDS[SnacksUtils] = ElectricCharge;Snacks
		resourcesToKeep:NEEDS[Kerbalism] = ElectricCharge;Shielding;Food;Oxygen
		resourcesToKeep:NEEDS[TacLifeSupport] = ElectricCharge;Food;Oxygen;Water;CarbonDioxide;Waste;WasteWater
		resourcesToKeep:NEEDS[USILifeSupport] = ElectricCharge;Supplies;Mulch;ReplacementParts
	}
}

@PART[sspx-expandable-centrifuge-375-1]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 12
		@maxStorage *= 12
	}
}
@PART[sspx-expandable-centrifuge-375-2]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[WBIMultipurposeHab]
	{
		@capacityFactor = 9
		@maxStorage *= 9
	}
}


// Labs = = = = = = = = = = = = = = = = = = = = = = = = = = =

@PART[sspx-lab-375-1]:NEEDS[StationPartsExpansionRedux]
{
	@MODULE[ModuleScienceConverter]
	{
		@name = WBIScienceConverter
		fundsPerData = 100.0 //How many Funds per point of data 
		reputationPerData = 1.0 //How much Reputation per point of data
		@scienceCap = 800	//How much science can we store before having to transmit?	
	}

	MODULE
	{
		name = WBIMultipurposeLab
		enableLogging = True
		showGUI = True
		isInflatable = False
		
		capacityFactor = 1.5
		fieldReconfigurable = true
		templateNodes = PATH_SCIENCE
		defaultTemplate = DocScience
		
		baseStorage = 0.001
		maxStorage = 200

		partToolTipTitle = Your First Commercial Lab
		
		partToolTip = Just like a multipurpose habitat, this general-purpose science lab can be reconfigured for several different science roles with a feat of engineering- if you have the right resources and talent. A bastion of science, resources made by one of the lab's configurations will benefit from chemical analysis.
		
		resourcesToKeep = ElectricCharge
		%resourcesToKeep:NEEDS[SnacksUtils] = ElectricCharge;Snacks
		%resourcesToKeep:NEEDS[Kerbalism] = ElectricCharge;Shielding;Food;Oxygen
		%resourcesToKeep:NEEDS[TacLifeSupport] = ElectricCharge;Food;Oxygen;Water;CarbonDioxide;Waste;WasteWater
		%resourcesToKeep:NEEDS[USILifeSupport] = ElectricCharge;Supplies;Mulch;ReplacementParts
	}
	// MODULE:NEEDS[KIS]
	// {
		// name = ModuleKISInventory
		// maxVolume = 2000
		// externalAccess = true
		// internalAccess = true
		// slotsX = 4
		// slotsY = 4
		// slotSize = 50
		// itemIconResolution = 128
		// selfIconResolution = 128
		// openSndPath = KIS/Sounds/containerOpen
		// closeSndPath = KIS/Sounds/containerClose
		// defaultMoveSndPath = KIS/Sounds/itemMove
	// }
	MODULE
	{
		name = WBIEfficiencyMonitor
		efficiencyType = science
	}
	MODULE
	{
		name = WBIResourceDistributor
		resourceBlacklist = ReplacementParts
	}
}