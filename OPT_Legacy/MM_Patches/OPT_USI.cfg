// USI LS for OPT Spaceplane
// Author: JadeOfMaar
// Version 1.0.0; June 10 2017
// Affects all cockpits except OPT I-LS AA Cockpit Mk1 because it has texture/mesh switching
// Affects all other crewed parts
// Affects all cargo bays and hollow fuselage
// Affects H fuel tank because there's no H class bay or hollow fuselage, and H cabins have no spare volume

// Cockpits
//@PART[mk2_cockpit,mk2_cockpitv2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] {}

@PART[mk3Cockpit_Airliner]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	RESOURCE
	{
		name = Supplies
		amount = 400
		maxAmount = 400
	}
	
	RESOURCE
	{
		name = ElectricCharge
		amount = 500
		maxAmount = 500
	}
	
	RESOURCE
	{
		name = MonoPropellant
		amount = 100
		maxAmount = 100
	}
}

@PART[a_cockpit]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	RESOURCE
	{
		name = Supplies
		amount = 800
		maxAmount = 800
	}
	
	RESOURCE
	{
		name = ElectricCharge
		amount = 2500
		maxAmount = 2500
	}
	
	RESOURCE
	{
		name = MonoPropellant
		amount = 450
		maxAmount = 450
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

@PART[b_cockpit,b_cockpit_qs]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 1600,400,1500,800;800,1500,800;360,440,1500,800
		initialResourceAmounts = 1600,0,1500,800;800,1500,800;360,440,1500,800
		basePartMass = 0.29
		tankMass = 0;0;0
		tankCost = 0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

@PART[i_4m_cockpit_isp,phoenix_cockpit,ils_cockpitv2]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 800,200,1500,60;240,1500,60;135,160,1500,60
		initialResourceAmounts = 800,0,1500,60;240,1500,60;135,160,1500,60
		basePartMass = 0.29
		tankMass = 0;0;0
		tankCost = 0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
}

@PART[j_6m_cockpit]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 3200,800,1000,800;800,1000,800;360,440,1000,800
		initialResourceAmounts = 3200,0,1000,800;800,1000,800;360,440,1000,800
		basePartMass = 0.29
		tankMass = 0;0;0
		tankCost = 0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
}

@PART[j_cockpit,j_cockpitv2,j_cockpit_qs,j_cockpit_qs_no_intake]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] 
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 1600,400,1500,800;800,1500,800;360,440,1500,800
		initialResourceAmounts = 1600,0,1500,800;800,1500,800;360,440,1500,800
		basePartMass = 0.29
		tankMass = 0;0;0
		tankCost = 0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

@PART[k_10m_cockpit,k_10m_cockpit_legacy,k_10m_cockpit_custom]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] 
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 3200,800,1500,800;800,1500,800;360,440,1500,800
		initialResourceAmounts = 3200,0,1500,800;800,1500,800;360,440,1500,800
		basePartMass = 0.29
		tankMass = 0;0;0
		tankCost = 0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 8
		RecyclePercent = .65
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 16.4
		}
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

@PART[l_8m_cockpit]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] 
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 3200,800,2500,1000;800,2500,1000;360,440,2500,1000
		initialResourceAmounts = 3200,0,2500,1000;800,2500,1000;360,440,2500,1000
		basePartMass = 0.29
		tankMass = 0;0;0
		tankCost = 0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 36
		CrewCapacity = 10
		BaseHabMultiplier = 0.5
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.125
		}
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 10
		RecyclePercent = .65
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 20.5
		}
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

//Cabins
@PART[h_3m_crew_mm,h_3m_crew_fm]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] 
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 0
		CrewCapacity = 4
		BaseHabMultiplier = 0.7
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.07
		}
	}
}

@PART[j_4m_crew]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] 
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 0;3200,800,1000,270;1200,1000,270;720,880,1000,270
		initialResourceAmounts = 0;3200,0,1000,270;1200,1000,270;720,880,1000,270
		basePartMass = 0.29
		tankMass = 0;0;0;0
		tankCost = 0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 72
		CrewCapacity = 8
		BaseHabMultiplier = 0.7
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.14
		}
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 12
		RecyclePercent = .7
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 37.2
		}
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

@PART[l_4m_crew]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] 
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 0;3200,800,2500,1000;2700,1500,540;1260,1540,1500,540
		initialResourceAmounts = 0;3200,0,2500,1000;2700,1500,540;1260,1540,1500,540
		basePartMass = 0.29
		tankMass = 0;0;0;0
		tankCost = 0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE 
	{
		name = ModuleHabitation
		BaseKerbalMonths = 140
		CrewCapacity = 8
		BaseHabMultiplier = 0.7
		ConverterName = Habitat
		StartActionName = Start Habitat
		StopActionName = Stop Habitat		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.14
		}
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 12
		RecyclePercent = .8
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 12
		}
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

//@PART[j_2m_inlineBoardingRamp,j_3m_rearHatch]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] {}

//Labs
@PART[j_4m_Lab,b_4m_Lab]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
}

//Bays
@PART[j_4m_cargo,j_4m_service]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies;Fertilizer;Gypsum;Minerals;Ore;LiquidFuel;LiquidFuel,Oxidizer
		resourceAmounts = 0;4000;4000;4000;4000;480;1080;540,660
		initialResourceAmounts = 0;4000;4000;4000;4000;0;1080;540,660
		basePartMass = 0.29
		tankMass = 0;0;0;0;0;0;0;0
		tankCost = 0;0;0;0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

@PART[kh_6m_cargo,kh_6m_fuselage,l_6m_cargo,l_6m_fuselage]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies;Fertilizer;Gypsum;Minerals;Ore;LiquidFuel;LiquidFuel,Oxidizer
		resourceAmounts = 0;43200;43200;43200;43200;8640;2520;1260,1540
		initialResourceAmounts = 0;43200;43200;43200;43200;0;2520;1260,1540
		basePartMass = 0.29
		tankMass = 0;0;0;0;0;0;0;0
		tankCost = 0;0;0;0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

@PART[c_6m_cargo,c_6m_tanks]:NEEDS[USILifeSupport]:AFTER[USILifeSupport]
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies;Fertilizer;Gypsum;Minerals;Ore;LiquidFuel;LiquidFuel,Oxidizer
		resourceAmounts = 0;45000;45000;45000;45000;9000;3200;1440,1760
		initialResourceAmounts = 0;45000;45000;45000;45000;0;3200;1440,1760
		basePartMass = 0.29
		tankMass = 0;0;0;0;0;0;0;0
		tankCost = 0;0;0;0;0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = USI_ModuleResourceWarehouse
	}
}

//Tanks, H only because there's no H size bay
@PART[h_3m_fuel_mm,h_3m_fuel_fm]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] 
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 0;1280,320,400,120;800,400,120;360,540,400,120
		initialResourceAmounts = 0;1280,0,400,120;800,400,120;360,540,400,120
		basePartMass = 0.29
		tankMass = 0;0;0;0
		tankCost = 0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
}

@PART[h_4m_nose_mm,h_4m_nose_fm]:NEEDS[USILifeSupport]:AFTER[USILifeSupport] 
{
	-RESOURCE,* {}
	-MODULE[FSfuelSwitch],* {}
	-MODULE[InterstellarFuelSwitch],* {}
    
	MODULE
	{
		name = FSfuelSwitch
		resourceNames = Structural;Supplies,Mulch,ElectricCharge,MonoPropellant;LiquidFuel,ElectricCharge,MonoPropellant;LiquidFuel,Oxidizer,ElectricCharge,MonoPropellant
		resourceAmounts = 0;1280,320,400,120;800,400,120;360,540,400,120
		initialResourceAmounts = 0;1280,0,400,120;800,400,120;360,540,400,120
		basePartMass = 0.29
		tankMass = 0;0;0;0
		tankCost = 0;0;0;0
		displayCurrentTankCost = false
		hasGUI = true
		showInfo = true
	}
	
	MODULE
	{
		name = ModuleLifeSupportRecycler
		CrewCapacity = 4
		RecyclePercent = .6
		ConverterName = Life Support
		tag = Life Support
		StartActionName = Start Life Support
		StopActionName = Stop Life Support

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 2
		}
	}
}