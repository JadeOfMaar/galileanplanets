// Propellium for CryoTanks and CryoEngines
B9_TANK_TYPE:NEEDS[ClassicStock]
{
	name = CTPropellium
	tankMass = 0.00010627500
	tankCost = 0.15
	RESOURCE
	{
		name = Propellium
		unitsPerVolume = 2.7
	}
}
B9_TANK_TYPE:NEEDS[ClassicStock]
{
	name = CTPropLox
	tankMass = 0.000278904
	tankCost = 0
	RESOURCE
	{
		name = Propellium
		unitsPerVolume = 1.35
	}
	RESOURCE
	{
		name = Oxidizer
		unitsPerVolume = 0.45
	}
}

// Tanks
@PART:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]]:NEEDS[B9PartSwitch,ClassicStock]:AFTER[zzz_CryoTanks]
{
	@MODULE[ModuleCryoTank]
	{
		BOILOFFCONFIG
		{
			FuelName = Propellium
			BoiloffRate = 0.01
			CoolingCost = 0.1
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
	{
		SUBTYPE
		{
			name = PropLox
			tankType = CTPropLox
			title = PropLox
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
		}
		SUBTYPE
		{
			name = Propellium
			tankType = CTPropellium
			title = Propellium
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorLqdHydrogen
		}
	}
}

// Engines
@PART[cryoengine-*]:NEEDS[B9PartSwitch,ClassicStock]:AFTER[CryoEngines]
{
	@description ^= :$: <br><color="green">This part can change its fuel mix.</color>
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Propellant
		switcherDescription = Fuel Mix
		switcherDescriptionPlural = Fuel Mixes
		switchInFlight = True
		SUBTYPE
		{
			name = Hydrolox
			title = Hydrolox
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 1
			descriptionSummary = LqdHydrogen + Oxidizer
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
				}
				DATA
				{
					PROPELLANT
					{
						name = LqdHydrogen
						ratio = 1.5
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 0.1
						DrawGauge = True
					}
				}
			}
		}
		SUBTYPE
		{
			name = PropLox
			title = PropLox
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 2
			descriptionSummary = Propellium + Oxidizer
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
				}
				DATA
				{
					PROPELLANT
					{
						name = Propellium
						ratio = 3
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 1
						DrawGauge = True
					}
				}
			}
		}
	}
}