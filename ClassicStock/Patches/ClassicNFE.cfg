// :: Classic Stock :: Near Future Electrical

// Changes reactors and drums to hold NuclearFuel and NuclearWaste
// (Sadly) Removes all of Nertea's advanced modules and CoreHeat system

// Resource
RESOURCE_DEFINITION:NEEDS[!CommunityResourcePack]
{
	name = StoredCharge
	displayName =  StoredCharge
	abbreviation = SC
	unitCost = 0
	density = 0
	flowMode = NO_FLOW
	transfer = NONE
	isTweakable = false
    isVisible = true
	volume = 1
    ksparpicon = TriggerTech/KSPAlternateResourcePanel/Icons/StoredCharge
}

// Drums
@PART[nuclearfuel-*]:HAS[@MODULE[RadioactiveStorageContainer]]:AFTER[NearFutureElectrical]
{
	!MODULE[RadioactiveStorageContainer] {}
	@RESOURCE[EnrichedUranium]
	{
		@name = NuclearFuel
	}
	@RESOURCE[DepletedFuel]
	{
		@name = NuclearWaste
	}
}

// Reactors
@PART[reactor-*]:HAS[@MODULE[FissionGenerator]]:AFTER[NearFutureElectrical]
{
	@RESOURCE[EnrichedUranium]
	{
		@name = NuclearFuel
	}
	@RESOURCE[DepletedFuel]
	{
		@name = NuclearWaste
	}
	!MODULE[ModuleUpdateOverride] {}
	!MODULE[ModuleCoreHeatNoCatchup] {}
	!MODULE[RadioactiveStorageContainer] {}
	@MODULE[FissionReactor]
	{
		@name = ModuleResourceConverter
		!HeatGeneration = abc
		!NominalTemperature = abc
		!CriticalTemperature = abc
		!CoreDamageRate = abc
		// Heat animation, plays when above nominal temp
		// OverheatAnimation = Reactor_50kW_Heat
		!FuelName = abc
		!TemperatureModifier {}
		@INPUT_RESOURCE[EnrichedUranium]
		{
			@ResourceName = NuclearFuel
		}
		@OUTPUT_RESOURCE[DepletedFuel]
		{
			@ResourceName = NuclearWaste
			@Ratio *= 0.9
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = #$../../MODULE[FissionGenerator]/PowerGeneration$
		}
	}
	!MODULE[FissionGenerator] {}
	MODULE
	{
		name = WBIPowerMonitor
	}
}
